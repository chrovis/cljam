<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>cljam.algo.pileup documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Cljam</span> <span class="project-version">0.7.4</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cljam</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>algo</span></div></div></li><li class="depth-3 branch"><a href="cljam.algo.bam-indexer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bam-indexer</span></div></a></li><li class="depth-3 branch"><a href="cljam.algo.convert.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>convert</span></div></a></li><li class="depth-3 branch"><a href="cljam.algo.dedupe.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dedupe</span></div></a></li><li class="depth-3 branch"><a href="cljam.algo.depth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>depth</span></div></a></li><li class="depth-3 branch"><a href="cljam.algo.dict.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dict</span></div></a></li><li class="depth-3 branch"><a href="cljam.algo.fasta-indexer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fasta-indexer</span></div></a></li><li class="depth-3 branch"><a href="cljam.algo.level.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>level</span></div></a></li><li class="depth-3 branch"><a href="cljam.algo.normal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>normal</span></div></a></li><li class="depth-3 branch current"><a href="cljam.algo.pileup.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pileup</span></div></a></li><li class="depth-3"><a href="cljam.algo.sorter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sorter</span></div></a></li><li class="depth-2 branch"><a href="cljam.common.html"><div class="inner"><span class="tree" style="top: -331px;"><span class="top" style="height: 340px;"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-3 branch"><a href="cljam.io.bam-index.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bam-index</span></div></a></li><li class="depth-3 branch"><a href="cljam.io.bed.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bed</span></div></a></li><li class="depth-3 branch"><a href="cljam.io.bigwig.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bigwig</span></div></a></li><li class="depth-3 branch"><a href="cljam.io.fastq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fastq</span></div></a></li><li class="depth-3 branch"><a href="cljam.io.gff.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gff</span></div></a></li><li class="depth-3 branch"><a href="cljam.io.pileup.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pileup</span></div></a></li><li class="depth-3 branch"><a href="cljam.io.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-3 branch"><a href="cljam.io.sam.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sam</span></div></a></li><li class="depth-3 branch"><a href="cljam.io.sequence.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sequence</span></div></a></li><li class="depth-3 branch"><a href="cljam.io.tabix.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tabix</span></div></a></li><li class="depth-3 branch"><a href="cljam.io.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-3 branch"><a href="cljam.io.vcf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vcf</span></div></a></li><li class="depth-3"><a href="cljam.io.wig.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wig</span></div></a></li><li class="depth-2"><a href="cljam.util.html"><div class="inner"><span class="tree" style="top: -424px;"><span class="top" style="height: 433px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-3 branch"><a href="cljam.util.chromosome.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chromosome</span></div></a></li><li class="depth-3 branch"><a href="cljam.util.region.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>region</span></div></a></li><li class="depth-3 branch"><a href="cljam.util.sequence.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sequence</span></div></a></li><li class="depth-3"><a href="cljam.util.whole-genome.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>whole-genome</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="cljam.algo.pileup.html#var--.3Elocus-pile"><div class="inner"><span>-&gt;locus-pile</span></div></a></li><li class="depth-1"><a href="cljam.algo.pileup.html#var-align-pileup-seqs"><div class="inner"><span>align-pileup-seqs</span></div></a></li><li class="depth-1"><a href="cljam.algo.pileup.html#var-basic-mpileup-pred"><div class="inner"><span>basic-mpileup-pred</span></div></a></li><li class="depth-1"><a href="cljam.algo.pileup.html#var-create-mpileup"><div class="inner"><span>create-mpileup</span></div></a></li><li class="depth-1"><a href="cljam.algo.pileup.html#var-filter-by-base-quality"><div class="inner"><span>filter-by-base-quality</span></div></a></li><li class="depth-1"><a href="cljam.algo.pileup.html#var-index-cigar"><div class="inner"><span>index-cigar</span></div></a></li><li class="depth-1"><a href="cljam.algo.pileup.html#var-mpileup"><div class="inner"><span>mpileup</span></div></a></li><li class="depth-1"><a href="cljam.algo.pileup.html#var-pileup"><div class="inner"><span>pileup</span></div></a></li><li class="depth-1"><a href="cljam.algo.pileup.html#var-pileup-seq"><div class="inner"><span>pileup-seq</span></div></a></li><li class="depth-1"><a href="cljam.algo.pileup.html#var-resolve-base"><div class="inner"><span>resolve-base</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">cljam.algo.pileup</h1><div class="doc"><pre class="plaintext">Functions to calculate pileup from the BAM.
</pre></div><div class="public anchor" id="var--.3Elocus-pile"><h3>-&gt;locus-pile</h3><div class="usage"><code>(-&gt;locus-pile chr [pos pile])</code></div><div class="doc"><pre class="plaintext">Convert a pile into `cljam.io.pileup.LocusPile`.
</pre></div><div class="src-link"><a href="https://github.com/chrovis/cljam/blob/0.7.4/src/cljam/algo/pileup.clj#L105">view source</a></div></div><div class="public anchor" id="var-align-pileup-seqs"><h3>align-pileup-seqs</h3><div class="usage"><code>(align-pileup-seqs &amp; xs)</code></div><div class="doc"><pre class="plaintext">Align multiple piled-up seqs.
</pre></div><div class="src-link"><a href="https://github.com/chrovis/cljam/blob/0.7.4/src/cljam/algo/pileup.clj#L255">view source</a></div></div><div class="public anchor" id="var-basic-mpileup-pred"><h3>basic-mpileup-pred</h3><div class="usage"><code>(basic-mpileup-pred min-mapq)</code></div><div class="doc"><pre class="plaintext">Basic predicate function for filtering alignments for mpileup.
</pre></div><div class="src-link"><a href="https://github.com/chrovis/cljam/blob/0.7.4/src/cljam/algo/pileup.clj#L67">view source</a></div></div><div class="public anchor" id="var-create-mpileup"><h3>create-mpileup</h3><div class="usage"><code>(create-mpileup in-sam out-mplp)</code><code>(create-mpileup in-sam in-ref out-mplp)</code><code>(create-mpileup in-sam in-ref out-mplp region)</code><code>(create-mpileup in-sam in-ref out-mplp region options)</code></div><div class="doc"><pre class="plaintext">Creates a mpileup file from the BAM file.

The following `options` are available:
- `min-base-quality` Minimum quality of called bases [13]
- `min-map-quality` Minimum quality of alignments [0]
- `ignore-overlaps?` Disable detecting overlapped bases of PE reads [false]</pre></div><div class="src-link"><a href="https://github.com/chrovis/cljam/blob/0.7.4/src/cljam/algo/pileup.clj#L282">view source</a></div></div><div class="public anchor" id="var-filter-by-base-quality"><h3>filter-by-base-quality</h3><div class="usage"><code>(filter-by-base-quality min-base-quality)</code></div><div class="doc"><pre class="plaintext">Returns a predicate for filtering piled-up reads by base quality at its
position.</pre></div><div class="src-link"><a href="https://github.com/chrovis/cljam/blob/0.7.4/src/cljam/algo/pileup.clj#L111">view source</a></div></div><div class="public anchor" id="var-index-cigar"><h3>index-cigar</h3><div class="usage"><code>(index-cigar aln)</code></div><div class="doc"><pre class="plaintext">Align bases and base quality scores with the reference coordinate.
</pre></div><div class="src-link"><a href="https://github.com/chrovis/cljam/blob/0.7.4/src/cljam/algo/pileup.clj#L59">view source</a></div></div><div class="public anchor" id="var-mpileup"><h3>mpileup</h3><div class="usage"><code>(mpileup region options &amp; sam-readers)</code></div><div class="doc"><pre class="plaintext">Pile up alignments from multiple sources.

The following `options` are available:
- `min-base-quality` Minimum quality of called bases [13]
- `min-map-quality` Minimum quality of alignments [0]
- `ignore-overlaps?` Disable detecting overlapped bases of PE reads [false]</pre></div><div class="src-link"><a href="https://github.com/chrovis/cljam/blob/0.7.4/src/cljam/algo/pileup.clj#L272">view source</a></div></div><div class="public anchor" id="var-pileup"><h3>pileup</h3><div class="usage"><code>(pileup sam-reader region)</code><code>(pileup sam-reader {:keys [chr start end], :or {start 1, end Integer/MAX_VALUE}} {:keys [min-base-quality min-map-quality ignore-overlaps? chunk-size], :or {min-base-quality 13, min-map-quality 0, ignore-overlaps? false, chunk-size 5000}})</code></div><div class="doc"><pre class="plaintext">Piles up alignments in given region and returns a lazy sequence of
`cljam.io.pileup.LocusPile`s.

The following options are available:
- `min-base-quality` Minimum quality of called bases [13]
- `min-map-quality` Minimum quality of alignments [0]
- `ignore-overlaps?` Disable detecting overlapped bases of PE reads [false]
- `chunk-size` Size of a chunk to pile up at once [5000]</pre></div><div class="src-link"><a href="https://github.com/chrovis/cljam/blob/0.7.4/src/cljam/algo/pileup.clj#L215">view source</a></div></div><div class="public anchor" id="var-pileup-seq"><h3>pileup-seq</h3><div class="usage"><code>(pileup-seq start end alns)</code></div><div class="doc"><pre class="plaintext">Returns a lazy sequence that each element contains [position (alignments
piled-up at the locus)].</pre></div><div class="src-link"><a href="https://github.com/chrovis/cljam/blob/0.7.4/src/cljam/algo/pileup.clj#L32">view source</a></div></div><div class="public anchor" id="var-resolve-base"><h3>resolve-base</h3><div class="usage"><code>(resolve-base ref-pos aln)</code></div><div class="doc"><pre class="plaintext">Find a piled-up base and an indel from an alignment.
</pre></div><div class="src-link"><a href="https://github.com/chrovis/cljam/blob/0.7.4/src/cljam/algo/pileup.clj#L82">view source</a></div></div></div></body></html>